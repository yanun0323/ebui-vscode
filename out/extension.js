(()=>{"use strict";var e={23:e=>{e.exports=require("util")},317:e=>{e.exports=require("child_process")},398:e=>{e.exports=require("vscode")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=async function(e){s.appendLine("EBUI extension activated");try{await c()}catch(e){t.window.showErrorMessage(`Failed to install EBUI tool: ${e}`),s.appendLine(`Failed to install EBUI tool: ${e}`)}let n=t.commands.registerCommand("ebui-vscode.installEbui",(async()=>{try{await c(),s.appendLine("EBUI tool installed successfully!")}catch(e){t.window.showErrorMessage(`Failed to install EBUI tool: ${e}`),s.appendLine(`Failed to install EBUI tool: ${e}`)}}));e.subscriptions.push(n);let i=t.commands.registerCommand("ebui-vscode.runEbui",(async()=>{await u()}));e.subscriptions.push(i);let o=t.workspace.onDidSaveTextDocument((e=>{const n=t.workspace.getConfiguration("ebui-vscode");if(n.get("enableAutoRun")&&"go"===e.languageId){const e=n.get("debounceDelay")||500;r&&clearTimeout(r),r=setTimeout((async()=>{await u(),r=void 0}),e)}}));e.subscriptions.push(o)},e.deactivate=function(){r&&clearTimeout(r),s.appendLine("EBUI extension deactivated")};const t=n(398),o=n(317),a=n(23).promisify(o.exec),s=t.window.createOutputChannel("ebui-vscode");let r;async function c(){t.window.showInformationMessage("Installing EBUI tool..."),s.appendLine("Installing EBUI tool...");try{const{stdout:e,stderr:t}=await a("go install github.com/yanun0323/ebui/tool/ebui@latest");return s.appendLine("EBUI tool installation successful:"),s.appendLine(e),void(t&&(s.appendLine("EBUI tool installation warnings:"),s.appendLine(t)))}catch(e){throw s.appendLine(`EBUI tool installation failed: ${e}`),new Error("Unable to install EBUI tool, make sure Go is installed on your system")}}async function u(){const e=t.window.activeTextEditor;if(!e)return void s.appendLine("No file is open");if("go"!==e.document.languageId)return void s.appendLine("Current file is not a Go file");const n=e.document.uri.fsPath,i=t.window.createStatusBarItem(t.StatusBarAlignment.Left,100);i.text="$(sync~spin) Running ebui...",i.show();try{const e=`ebui ${t.workspace.getConfiguration("ebui-vscode").get("keepWindows")?"-k ":""}-f "${n}"`;s.appendLine(`Executing command: ${e}`);const{stdout:o,stderr:r}=await a(e);s.appendLine("EBUI execution results:"),s.appendLine(o),r&&(s.appendLine("EBUI execution warnings:"),s.appendLine(r)),i.text="$(check) EBUI execution completed",setTimeout((()=>{i.dispose()}),3e3)}catch(e){s.appendLine(`EBUI execution failed: ${e}`),i.text="$(error) EBUI execution failed",setTimeout((()=>{i.dispose()}),3e3),t.window.showErrorMessage(`EBUI execution failed: ${e}`)}}})(),module.exports=i})();
//# sourceMappingURL=extension.js.map