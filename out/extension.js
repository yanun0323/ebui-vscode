(()=>{"use strict";var e={23:e=>{e.exports=require("util")},317:e=>{e.exports=require("child_process")},398:e=>{e.exports=require("vscode")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=async function(e){a.appendLine("EBUI extension activated");try{await l()}catch(e){t.window.showErrorMessage(`Failed to install EBUI tool: ${e}`),a.appendLine(`Failed to install EBUI tool: ${e}`)}let n=t.commands.registerCommand("ebui-vscode.installEbui",(async()=>{try{await l(),t.window.showInformationMessage("EBUI tool installed successfully!"),a.appendLine("EBUI tool installed successfully!")}catch(e){t.window.showErrorMessage(`Failed to install EBUI tool: ${e}`),a.appendLine(`Failed to install EBUI tool: ${e}`)}}));e.subscriptions.push(n);let o=t.commands.registerCommand("ebui-vscode.runEbui",(async()=>{await d()}));e.subscriptions.push(o);let i=t.workspace.onDidSaveTextDocument((e=>{const n=t.workspace.getConfiguration("ebui-vscode");if(n.get("enableAutoRun")&&"go"===e.languageId){const e=n.get("debounceDelay")||500;r&&clearTimeout(r),r=setTimeout((async()=>{await d(),r=void 0}),e)}}));e.subscriptions.push(i)},e.deactivate=function(){r&&clearTimeout(r),a.appendLine("EBUI extension deactivated")};const t=n(398),i=n(317),s=n(23).promisify(i.exec),a=t.window.createOutputChannel("ebui-vscode");let r;async function l(){t.window.showInformationMessage("Installing EBUI tool..."),a.appendLine("Installing EBUI tool...");try{const{stdout:e,stderr:t}=await s("go install github.com/yanun0323/ebui/tool/ebui@latest");return a.appendLine("EBUI tool installation successful:"),a.appendLine(e),void(t&&(a.appendLine("EBUI tool installation warnings:"),a.appendLine(t)))}catch(e){throw a.appendLine(`EBUI tool installation failed: ${e}`),new Error("Unable to install EBUI tool, make sure Go is installed on your system")}}async function d(){const e=t.window.activeTextEditor;if(!e)return t.window.showInformationMessage("No file is open"),void a.appendLine("No file is open");if("go"!==e.document.languageId)return t.window.showInformationMessage("Current file is not a Go file"),void a.appendLine("Current file is not a Go file");const n=e.document.uri.fsPath,o=t.window.createStatusBarItem(t.StatusBarAlignment.Left,100);o.text="$(sync~spin) Running ebui...",o.show();try{const e=`ebui -f "${n}"`;a.appendLine(`Executing command: ${e}`);const{stdout:t,stderr:i}=await s(e);a.appendLine("EBUI execution results:"),a.appendLine(t),i&&(a.appendLine("EBUI execution warnings:"),a.appendLine(i)),o.text="$(check) EBUI execution completed",setTimeout((()=>{o.dispose()}),3e3)}catch(e){a.appendLine(`EBUI execution failed: ${e}`),o.text="$(error) EBUI execution failed",setTimeout((()=>{o.dispose()}),3e3),t.window.showErrorMessage(`EBUI execution failed: ${e}`)}}})(),module.exports=o})();
//# sourceMappingURL=extension.js.map